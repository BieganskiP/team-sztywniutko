{"mappings":"AAMA,MAAMA,EAAwBC,SAASC,cAAc,eAarDC,iBACE,MAAOC,EAAgBC,EAAcC,SAAwBC,QAAQC,IAAI,CACvEC,MAAM,4FACNA,MAAM,uFACNA,MAAM,4FAGR,IAAKL,EAAeM,GAAI,CACtB,MAAMC,EAAU,yBAAyBP,EAAeQ,SACxD,MAAM,IAAIC,MAAMF,E,CAElB,IAAKN,EAAaK,GAAI,CACpB,MAAMC,EAAU,yBAAyBN,EAAaO,SACtD,MAAM,IAAIC,MAAMF,E,CAElB,IAAKL,EAAeI,GAAI,CACtB,MAAMC,EAAU,yBAAyBL,EAAeM,SACxD,MAAM,IAAIC,MAAMF,E,CAGlB,MAAMG,QAAeV,EAAeW,OAC9BC,QAAsBX,EAAaU,OACnCE,QAAeX,EAAeS,OACpC,MAAO,CAACD,EAAQE,EAAcE,OAAQD,EAAOA,O,EAG/CE,GACGC,MAAK,EAAEN,EAAQE,EAAeC,MAC7BH,EAAOO,QAAQC,SAAQC,IACrB,IAAIC,EAAQD,EAAMC,MACdC,EAzCV,SAA2BC,EAAKC,GAC9B,IAAIC,EAAS,GAOb,OANAF,EAAIJ,SAAQO,IACV,IAAIC,EAAQH,EAAII,MAAKC,GAAKA,EAAEH,KAAOA,IAAII,UACzBC,IAAVJ,GACFF,EAAOO,KAAKL,EAAM,IAGfF,EAAOQ,KAAK,K,CAiCAC,CAAkBd,EAAMe,UAAWrB,GAC9CsB,EAAOhB,EAAMiB,aAAaC,MAAM,EAAG,GACnCC,EAAS1B,EAAc2B,SAAW,OAASpB,EAAMqB,YACrD5C,EAAsB6C,mBACpB,YACA,iFAEgCH,sGAEWlB,8DACEC,OAAcc,6BAG5D,GACD,IAEHO,OAAMC,IACLC,QAAQD,MACN,+CAAiDA,EAAMpC,QACxD","sources":["src/js/main.js"],"sourcesContent":["// https://api.themoviedb.org/3/movie/550?api_key=bfe21f4061b2869ccff2b4c323a3a257\n\n// bfe21f4061b2869ccff2b4c323a3a257\n\nlet apiKey = 'bfe21f4061b2869ccff2b4c323a3a257';\n\nconst movieLibraryContainer = document.querySelector('.movie-set');\n\nfunction mapGenreIdsToName(ids, map) {\n  let result = [];\n  ids.forEach(id => {\n    let genre = map.find(x => x.id === id).name;\n    if (genre !== undefined) {\n      result.push(genre);\n    }\n  });\n  return result.join(', ');\n}\n\nasync function fetchMoviesAndCategories() {\n  const [moviesResponse, confResponse, genresResponse] = await Promise.all([\n    fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${apiKey}`),\n    fetch(`https://api.themoviedb.org/3/configuration?api_key=${apiKey}`),\n    fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${apiKey}`),\n  ]);\n\n  if (!moviesResponse.ok) {\n    const message = `An error has occured: ${moviesResponse.status}`;\n    throw new Error(message);\n  }\n  if (!confResponse.ok) {\n    const message = `An error has occured: ${confResponse.status}`;\n    throw new Error(message);\n  }\n  if (!genresResponse.ok) {\n    const message = `An error has occured: ${genresResponse.status}`;\n    throw new Error(message);\n  }\n\n  const movies = await moviesResponse.json();\n  const configuration = await confResponse.json();\n  const genres = await genresResponse.json();\n  return [movies, configuration.images, genres.genres];\n}\n\nfetchMoviesAndCategories()\n  .then(([movies, configuration, genres]) => {\n    movies.results.forEach(movie => {\n      let title = movie.title;\n      let category = mapGenreIdsToName(movie.genre_ids, genres);\n      let year = movie.release_date.slice(0, 4);\n      let poster = configuration.base_url + 'w500' + movie.poster_path;\n      movieLibraryContainer.insertAdjacentHTML(\n        'beforeend',\n        `\n  <li class=\"movie-card modal-open\">\n    <img class=\"movie-card__img\" src=\"${poster}\" />\n    <div class=\"movie-card__description\">\n      <h2 class=\"movie-card__description--title\">${title}</h2>\n      <p class=\"movie-card__description--category\">${category} | ${year}</p>\n    </div>\n  </li>`\n      );\n    });\n  })\n  .catch(error => {\n    console.error(\n      'movies or categories request failed. Error: ' + error.message\n    );\n  });\n"],"names":["$d706c914d748cb55$var$movieLibraryContainer","document","querySelector","async","moviesResponse","confResponse","genresResponse","Promise","all","fetch","ok","message","status","Error","movies","json","configuration","genres","images","$d706c914d748cb55$var$fetchMoviesAndCategories","then","results","forEach","movie","title","category","ids","map","result","id","genre","find","x","name","undefined","push","join","$d706c914d748cb55$var$mapGenreIdsToName","genre_ids","year","release_date","slice","poster","base_url","poster_path","insertAdjacentHTML","catch","error","console"],"version":3,"file":"index.bf81a402.js.map"}